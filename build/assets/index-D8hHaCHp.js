(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const _ of o.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var R,g,me,C,ie,ve,ye,be,Y,V,z,A={},ge=[],Ue=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,j=Array.isArray;function x(t,e){for(var n in e)t[n]=e[n];return t}function Z(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ie(t,e,n){var i,r,o,_={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:_[o]=e[o];if(arguments.length>2&&(_.children=arguments.length>3?R.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)_[o]===void 0&&(_[o]=t.defaultProps[o]);return L(t,_,i,r,null)}function L(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++me,__i:-1,__u:0};return r==null&&g.vnode!=null&&g.vnode(o),o}function W(t){return t.children}function B(t,e){this.props=t,this.context=e}function U(t,e){if(e==null)return t.__?U(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?U(t):null}function we(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return we(t)}}function oe(t){(!t.__d&&(t.__d=!0)&&C.push(t)&&!G.__r++||ie!=g.debounceRendering)&&((ie=g.debounceRendering)||ve)(G)}function G(){for(var t,e,n,i,r,o,_,a=1;C.length;)C.length>a&&C.sort(ye),t=C.shift(),a=C.length,t.__d&&(n=void 0,r=(i=(e=t).__v).__e,o=[],_=[],e.__P&&((n=x({},i)).__v=i.__v+1,g.vnode&&g.vnode(n),ee(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,o,r??U(i),!!(32&i.__u),_),n.__v=i.__v,n.__.__k[n.__i]=n,Pe(o,n,_),n.__e!=r&&we(n)));G.__r=0}function ke(t,e,n,i,r,o,_,a,d,c,p){var l,f,u,b,h,y,m,v=i&&i.__k||ge,N=e.length;for(d=Ee(n,e,v,d,N),l=0;l<N;l++)(u=n.__k[l])!=null&&(f=u.__i==-1?A:v[u.__i]||A,u.__i=l,y=ee(t,u,f,r,o,_,a,d,c,p),b=u.__e,u.ref&&f.ref!=u.ref&&(f.ref&&te(f.ref,null,u),p.push(u.ref,u.__c||b,u)),h==null&&b!=null&&(h=b),(m=!!(4&u.__u))||f.__k===u.__k?d=Se(u,d,t,m):typeof u.type=="function"&&y!==void 0?d=y:b&&(d=b.nextSibling),u.__u&=-7);return n.__e=h,d}function Ee(t,e,n,i,r){var o,_,a,d,c,p=n.length,l=p,f=0;for(t.__k=new Array(r),o=0;o<r;o++)(_=e[o])!=null&&typeof _!="boolean"&&typeof _!="function"?(d=o+f,(_=t.__k[o]=typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?L(null,_,null,null,null):j(_)?L(W,{children:_},null,null,null):_.constructor==null&&_.__b>0?L(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_).__=t,_.__b=t.__b+1,a=null,(c=_.__i=Ae(_,n,d,l))!=-1&&(l--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(r>p?f--:r<p&&f++),typeof _.type!="function"&&(_.__u|=4)):c!=d&&(c==d-1?f--:c==d+1?f++:(c>d?f--:f++,_.__u|=4))):t.__k[o]=null;if(l)for(o=0;o<p;o++)(a=n[o])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=U(a)),Ne(a,a));return i}function Se(t,e,n,i){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=Se(r[o],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=U(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ae(t,e,n,i){var r,o,_,a=t.key,d=t.type,c=e[n],p=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||p&&a==c.key&&d==c.type)return n;if(i>(p?1:0)){for(r=n-1,o=n+1;r>=0||o<e.length;)if((c=e[_=r>=0?r--:o++])!=null&&(2&c.__u)==0&&a==c.key&&d==c.type)return _}return-1}function le(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Ue.test(e)?n:n+"px"}function H(t,e,n,i,r){var o,_;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||le(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||le(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(be,"$1")),_=e.toLowerCase(),e=_ in t||e=="onFocusOut"||e=="onFocusIn"?_.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i?n.u=i.u:(n.u=Y,t.addEventListener(e,o?z:V,o)):t.removeEventListener(e,o?z:V,o);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function se(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Y++;else if(e.t<n.u)return;return n(g.event?g.event(e):e)}}}function ee(t,e,n,i,r,o,_,a,d,c){var p,l,f,u,b,h,y,m,v,N,$,F,I,re,D,E,q,P=e.type;if(e.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),o=[a=e.__e=n.__e]),(p=g.__b)&&p(e);e:if(typeof P=="function")try{if(m=e.props,v="prototype"in P&&P.prototype.render,N=(p=P.contextType)&&i[p.__c],$=p?N?N.props.value:p.__:i,n.__c?y=(l=e.__c=n.__c).__=l.__E:(v?e.__c=l=new P(m,$):(e.__c=l=new B(m,$),l.constructor=P,l.render=De),N&&N.sub(l),l.props=m,l.state||(l.state={}),l.context=$,l.__n=i,f=l.__d=!0,l.__h=[],l._sb=[]),v&&l.__s==null&&(l.__s=l.state),v&&P.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=x({},l.__s)),x(l.__s,P.getDerivedStateFromProps(m,l.__s))),u=l.props,b=l.state,l.__v=e,f)v&&P.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),v&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v&&P.getDerivedStateFromProps==null&&m!==u&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,$),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,$)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(l.props=m,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(T){T&&(T.__=e)}),F=0;F<l._sb.length;F++)l.__h.push(l._sb[F]);l._sb=[],l.__h.length&&_.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,$),v&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(u,b,h)})}if(l.context=$,l.props=m,l.__P=t,l.__e=!1,I=g.__r,re=0,v){for(l.state=l.__s,l.__d=!1,I&&I(e),p=l.render(l.props,l.state,l.context),D=0;D<l._sb.length;D++)l.__h.push(l._sb[D]);l._sb=[]}else do l.__d=!1,I&&I(e),p=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++re<25);l.state=l.__s,l.getChildContext!=null&&(i=x(x({},i),l.getChildContext())),v&&!f&&l.getSnapshotBeforeUpdate!=null&&(h=l.getSnapshotBeforeUpdate(u,b)),E=p,p!=null&&p.type===W&&p.key==null&&(E=xe(p.props.children)),a=ke(t,j(E)?E:[E],e,n,i,r,o,_,a,d,c),l.base=e.__e,e.__u&=-161,l.__h.length&&_.push(l),y&&(l.__E=l.__=null)}catch(T){if(e.__v=null,d||o!=null)if(T.then){for(e.__u|=d?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else{for(q=o.length;q--;)Z(o[q]);K(e)}else e.__e=n.__e,e.__k=n.__k,T.then||K(e);g.__e(T,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Fe(n.__e,e,n,i,r,o,_,d,c);return(p=g.diffed)&&p(e),128&e.__u?void 0:a}function K(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(K)}function Pe(t,e,n){for(var i=0;i<n.length;i++)te(n[i],n[++i],n[++i]);g.__c&&g.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){g.__e(o,r.__v)}})}function xe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:j(t)?t.map(xe):x({},t)}function Fe(t,e,n,i,r,o,_,a,d){var c,p,l,f,u,b,h,y=n.props,m=e.props,v=e.type;if(v=="svg"?r="http://www.w3.org/2000/svg":v=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((u=o[c])&&"setAttribute"in u==!!v&&(v?u.localName==v:u.nodeType==3)){t=u,o[c]=null;break}}if(t==null){if(v==null)return document.createTextNode(m);t=document.createElementNS(r,v,m.is&&m),a&&(g.__m&&g.__m(e,o),a=!1),o=null}if(v==null)y===m||a&&t.data==m||(t.data=m);else{if(o=o&&R.call(t.childNodes),y=n.props||A,!a&&o!=null)for(y={},c=0;c<t.attributes.length;c++)y[(u=t.attributes[c]).name]=u.value;for(c in y)if(u=y[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=u;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;H(t,c,null,u,r)}}for(c in m)u=m[c],c=="children"?f=u:c=="dangerouslySetInnerHTML"?p=u:c=="value"?b=u:c=="checked"?h=u:a&&typeof u!="function"||y[c]===u||H(t,c,u,y[c],r);if(p)a||l&&(p.__html==l.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(l&&(t.innerHTML=""),ke(e.type=="template"?t.content:t,j(f)?f:[f],e,n,i,v=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,_,o?o[0]:n.__k&&U(n,0),a,d),o!=null)for(c=o.length;c--;)Z(o[c]);a||(c="value",v=="progress"&&b==null?t.removeAttribute("value"):b!=null&&(b!==t[c]||v=="progress"&&!b||v=="option"&&b!=y[c])&&H(t,c,b,y[c],r),c="checked",h!=null&&h!=t[c]&&H(t,c,h,y[c],r))}return t}function te(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){g.__e(r,n)}}function Ne(t,e,n){var i,r;if(g.unmount&&g.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||te(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){g.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Ne(i[r],e,n||typeof t.type!="function");n||Z(t.__e),t.__c=t.__=t.__e=void 0}function De(t,e,n){return this.constructor(t,n)}function He(t,e,n){var i,r,o,_;e==document&&(e=document.documentElement),g.__&&g.__(t,e),r=(i=!1)?null:e.__k,o=[],_=[],ee(e,t=e.__k=Ie(W,null,[t]),r||A,A,e.namespaceURI,r?null:e.firstChild?R.call(e.childNodes):null,o,r?r.__e:e.firstChild,i,_),Pe(o,t,_)}R=ge.slice,g={__e:function(t,e,n,i){for(var r,o,_;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),_=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),_=r.__d),_)return r.__E=r}catch(a){t=a}throw t}},me=0,B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},n),this.props)),t&&x(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),oe(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),oe(this))},B.prototype.render=W,C=[],ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ye=function(t,e){return t.__v.__b-e.__v.__b},G.__r=0,be=/(PointerCapture)$|Capture$/i,Y=0,V=se(!1),z=se(!0);var Le=0;function s(t,e,n,i,r,o){e||(e={});var _,a,d=e;if("ref"in d)for(a in d={},e)a=="ref"?_=e[a]:d[a]=e[a];var c={type:t,props:d,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Le,__i:-1,__u:0,__source:r,__self:o};if(typeof t=="function"&&(_=t.defaultProps))for(a in _)d[a]===void 0&&(d[a]=_[a]);return g.vnode&&g.vnode(c),c}var O,w,J,_e,Q=0,$e=[],k=g,ce=k.__b,ae=k.__r,ue=k.diffed,de=k.__c,pe=k.unmount,fe=k.__;function Ce(t,e){k.__h&&k.__h(w,t,Q||e),Q=0;var n=w.__H||(w.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return Q=1,Be(Te,t)}function Be(t,e,n){var i=Ce(O++,2);if(i.t=t,!i.__c&&(i.__=[Te(void 0,e),function(a){var d=i.__N?i.__N[0]:i.__[0],c=i.t(d,a);d!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=w,!w.__f)){var r=function(a,d,c){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!o||o.call(this,a,d,c);var l=i.__c.props!==a;return p.forEach(function(f){if(f.__N){var u=f.__[0];f.__=f.__N,f.__N=void 0,u!==f.__[0]&&(l=!0)}}),o&&o.call(this,a,d,c)||l};w.__f=!0;var o=w.shouldComponentUpdate,_=w.componentWillUpdate;w.componentWillUpdate=function(a,d,c){if(this.__e){var p=o;o=void 0,r(a,d,c),o=p}_&&_.call(this,a,d,c)},w.shouldComponentUpdate=r}return i.__N||i.__}function ne(t,e){var n=Ce(O++,3);!k.__s&&Oe(n.__H,e)&&(n.__=t,n.u=e,w.__H.__h.push(n))}function Me(){for(var t;t=$e.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(M),t.__H.__h.forEach(X),t.__H.__h=[]}catch(e){t.__H.__h=[],k.__e(e,t.__v)}}k.__b=function(t){w=null,ce&&ce(t)},k.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),fe&&fe(t,e)},k.__r=function(t){ae&&ae(t),O=0;var e=(w=t.__c).__H;e&&(J===w?(e.__h=[],w.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(M),e.__h.forEach(X),e.__h=[],O=0)),J=w},k.diffed=function(t){ue&&ue(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&($e.push(e)!==1&&_e===k.requestAnimationFrame||((_e=k.requestAnimationFrame)||Ge)(Me)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),J=w=null},k.__c=function(t,e){e.some(function(n){try{n.__h.forEach(M),n.__h=n.__h.filter(function(i){return!i.__||X(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],k.__e(i,n.__v)}}),de&&de(t,e)},k.unmount=function(t){pe&&pe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{M(i)}catch(r){e=r}}),n.__H=void 0,e&&k.__e(e,n.__v))};var he=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(i),he&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);he&&(e=requestAnimationFrame(n))}function M(t){var e=w,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),w=e}function X(t){var e=w;t.__c=t.__(),w=e}function Oe(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Te(t,e){return typeof e=="function"?e(t):e}class Re{constructor(e){this.id=crypto.randomUUID(),this.name=e}}class je{constructor(e){this.id=crypto.randomUUID(),this.name=e,this.participants=[]}addParticipant(e){const n=new Re(e);return this.participants.push(n),n}removeParticipant(e){this.participants=this.participants.filter(n=>n.id!==e)}}function We({onGroupCreate:t}){const[e,n]=S("");return s("form",{onSubmit:r=>{r.preventDefault(),e.trim()&&(t(e),n(""))},children:s("div",{class:"field has-addons",children:[s("div",{class:"control",children:s("input",{class:"input",type:"text",placeholder:"New group name",value:e,onInput:r=>n(r.target.value)})}),s("div",{class:"control",children:s("button",{class:"button is-info",type:"submit",children:"Create Group"})})]})})}function qe({groups:t,onGroupSelect:e}){return s("div",{class:"list",children:t.map(n=>s("div",{class:"list-item",children:[s("span",{children:n.name}),s("button",{class:"button is-small is-link is-outlined",onClick:()=>e(n),children:"View"})]},n.id))})}function Je({onParticipantAdd:t}){const[e,n]=S("");return s("form",{onSubmit:r=>{r.preventDefault(),e.trim()&&(t(e),n(""))},children:s("div",{class:"field has-addons",children:[s("div",{class:"control",children:s("input",{class:"input",type:"text",placeholder:"New participant name",value:e,onInput:r=>n(r.target.value)})}),s("div",{class:"control",children:s("button",{class:"button is-info",type:"submit",children:"Add Participant"})})]})})}function Ve({participants:t,onParticipantRemove:e}){return s("div",{class:"list",children:t.map(n=>s("div",{class:"list-item",children:[s("span",{children:n.name}),s("button",{class:"button is-small is-danger is-outlined",onClick:()=>e(n.id),children:"Remove"})]},n.id))})}function ze({participants:t,onTransactionAdd:e}){const[n,i]=S(""),[r,o]=S(0),[_,a]=S([]),[d,c]=S([]),[p,l]=S("");ne(()=>{a(t.map(h=>({participantId:h.id,amount:0}))),c(t.map(h=>h.id))},[t]);const f=(h,y)=>{const m=_.map(v=>v.participantId===h?{...v,amount:parseFloat(y)||0}:v);a(m)},u=h=>{const y=d.includes(h)?d.filter(m=>m!==h):[...d,h];c(y)};return s("form",{onSubmit:h=>{h.preventDefault();const y=_.reduce((m,v)=>m+v.amount,0);if(Math.abs(y-r)>.01){l(`The sum of payments ($${y.toFixed(2)}) does not match the total amount ($${r.toFixed(2)}).`);return}if(d.length===0){l("At least one beneficiary must be selected.");return}l(""),e({description:n,total:r,payers:_.filter(m=>m.amount>0),beneficiaries:d.map(m=>({participantId:m}))}),i(""),o(0)},children:[p&&s("div",{class:"notification is-danger",children:p}),s("div",{class:"field",children:[s("label",{class:"label",children:"Description"}),s("div",{class:"control",children:s("input",{class:"input",type:"text",value:n,onInput:h=>i(h.target.value)})})]}),s("div",{class:"field",children:[s("label",{class:"label",children:"Total Amount"}),s("div",{class:"control",children:s("input",{class:"input",type:"number",value:r,onInput:h=>o(parseFloat(h.target.value)||0)})})]}),s("div",{class:"field",children:[s("label",{class:"label",children:"Paid by"}),t.map(h=>s("div",{class:"field has-addons",children:[s("p",{class:"control",children:s("a",{class:"button is-static",children:h.name})}),s("p",{class:"control",children:s("input",{class:"input",type:"number",value:_.find(y=>y.participantId===h.id)?.amount||0,onInput:y=>f(h.id,y.target.value)})})]},h.id))]}),s("div",{class:"field",children:[s("label",{class:"label",children:"For whom"}),t.map(h=>s("div",{class:"control",children:s("label",{class:"checkbox",children:[s("input",{type:"checkbox",checked:d.includes(h.id),onChange:()=>u(h.id)}),h.name]})},h.id))]}),s("div",{class:"control",children:s("button",{class:"button is-primary",type:"submit",children:"Add Transaction"})})]})}function Ke({transactions:t}){return s("div",{class:"list",children:t.map(e=>s("div",{class:"list-item",children:[s("span",{children:e.description}),s("span",{children:["$",e.total.toFixed(2)]})]},e.id))})}function Qe({balances:t,participants:e}){const n=i=>{const r=e.find(o=>o.id===i);return r?r.name:"Unknown"};return s("div",{children:[s("h4",{class:"title is-6",children:"Balances"}),s("ul",{children:[...t.entries()].map(([i,r])=>s("li",{children:[n(i),": ",r.toFixed(2)]},i))})]})}function Xe({settlements:t,participants:e}){const n=i=>{const r=e.find(o=>o.id===i);return r?r.name:"Unknown"};return t.length===0?s("p",{children:"All debts are settled!"}):s("div",{children:[s("h4",{class:"title is-6",children:"Suggested Settlements"}),s("ul",{children:t.map((i,r)=>s("li",{children:[n(i.from)," owes ",n(i.to)," ",s("strong",{children:["$",i.amount.toFixed(2)]})]},r))})]})}class Ye{constructor(e,n,i,r){this.id=crypto.randomUUID(),this.date=new Date,this.description=e,this.total=n,this.payers=i,this.beneficiaries=r}}function Ze(t,e){const n=new Map;for(const i of e)n.set(i.id,0);for(const i of t){for(const r of i.payers){const o=n.get(r.participantId)||0;n.set(r.participantId,o+r.amount)}if(i.beneficiaries.length>0){const r=i.total/i.beneficiaries.length;for(const o of i.beneficiaries){const _=n.get(o.participantId)||0;n.set(o.participantId,_-r)}}}return n}function et(t){const e=[],n=[],i=[];for(const[_,a]of t.entries())a>0?i.push({id:_,amount:a}):a<0&&n.push({id:_,amount:-a});n.sort((_,a)=>a.amount-_.amount),i.sort((_,a)=>a.amount-_.amount);let r=0,o=0;for(;r<n.length&&o<i.length;){const _=n[r],a=i[o],d=Math.min(_.amount,a.amount);e.push({from:_.id,to:a.id,amount:d}),_.amount-=d,a.amount-=d,_.amount<.01&&r++,a.amount<.01&&o++}return e}function tt({group:t,onBack:e}){const[n,i]=S(t.participants),[r,o]=S([]),[_,a]=S(new Map),[d,c]=S([]);ne(()=>{const u=Ze(r,n);a(u);const b=et(u);c(b)},[r,n]);const p=u=>{const b={id:crypto.randomUUID(),name:u};i([...n,b])},l=u=>{i(n.filter(b=>b.id!==u))},f=({description:u,total:b,payers:h,beneficiaries:y})=>{const m=new Ye(u,b,h,y);o([...r,m])};return s("section",{class:"section",children:[s("div",{class:"level",children:[s("div",{class:"level-left",children:s("h2",{class:"title is-4",children:["Group: ",t.name]})}),s("div",{class:"level-right",children:s("button",{class:"button",onClick:e,children:"Back to Groups"})})]}),s("div",{class:"columns",children:[s("div",{class:"column is-one-third",children:[s("h3",{class:"title is-5",children:"Participants"}),s(Je,{onParticipantAdd:p}),s("div",{class:"mt-4",children:s(Ve,{participants:n,onParticipantRemove:l})})]}),s("div",{class:"column",children:[s("h3",{class:"title is-5",children:"Transactions"}),s(ze,{participants:n,onTransactionAdd:f}),s("div",{class:"mt-4",children:s(Ke,{transactions:r})})]}),s("div",{class:"column is-one-third",children:[s(Qe,{balances:_,participants:n}),s("div",{class:"mt-4",children:s(Xe,{settlements:d,participants:n})})]})]})]})}function nt(t,e){const[n,i]=S(()=>{try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(r),e}});return ne(()=>{try{const r=typeof n=="function"?n(n):n;window.localStorage.setItem(t,JSON.stringify(r))}catch(r){console.error(r)}},[t,n]),[n,i]}function rt(){const[t,e]=nt("groups",[]),[n,i]=S(null),r=c=>{const p=new je(c);e([...t,p])},o=c=>{i(c)},_=()=>{i(null)},a=()=>{const c=JSON.stringify({groups:t},null,2),p=new Blob([c],{type:"application/json"}),l=URL.createObjectURL(p),f=document.createElement("a");f.href=l,f.download="expense-splitter-data.json",f.click(),URL.revokeObjectURL(l)},d=c=>{const p=c.target.files[0];if(p){const l=new FileReader;l.onload=f=>{try{const u=JSON.parse(f.target.result);u.groups&&e(u.groups)}catch(u){console.error("Error parsing JSON file:",u),alert("Invalid JSON file.")}},l.readAsText(p)}};return n?s(tt,{group:n,onBack:_}):s("div",{class:"container",children:[s("section",{class:"section",children:[s("h1",{class:"title",children:"Expense Splitter"}),s("p",{class:"subtitle",children:"Create groups and split expenses with your friends."}),s("div",{class:"buttons",children:[s("button",{class:"button is-primary",onClick:a,children:"Export Data"}),s("div",{class:"file is-primary",children:s("label",{class:"file-label",children:[s("input",{class:"file-input",type:"file",name:"resume",onChange:d,accept:".json"}),s("span",{class:"file-cta",children:[s("span",{class:"file-icon",children:s("i",{class:"fas fa-upload"})}),s("span",{class:"file-label",children:"Import Data"})]})]})})]})]}),s("section",{class:"section",children:[s("h2",{class:"title is-4",children:"My Groups"}),s(We,{onGroupCreate:r}),s("div",{class:"mt-4",children:s(qe,{groups:t,onGroupSelect:o})})]})]})}He(s(rt,{}),document.getElementById("app"));
